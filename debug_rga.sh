#!/bin/bash

echo "========================================"
echo "RGA 调试模式 (仅前5帧详细输出)"
echo "========================================"
echo ""
echo "调试信息说明:"
echo "  - 前5帧会输出详细的步骤信息"
echo "  - 如果RGA成功,第5帧后将关闭详细调试"
echo "  - 如果RGA失败,会回退到CPU转换"
echo ""
echo "观察要点:"
echo "  1. 是否看到 '✅ RGA硬件转换连续成功'"
echo "  2. 帧率: [RGA 硬件] 应该 >40fps"
echo "  3. 如果失败,查看错误码 (-22表示参数错误)"
echo ""
echo "========================================"
echo ""

cd /home/cat/workspace/Qt-pro/rtsp/build

# 运行程序,只显示关键信息
timeout 25 ./rtsp 2>&1 | grep -v "更新视频布局\|已为视频流\|选中视频流" | head -200

echo ""
echo "========================================"
echo "测试完成"
echo "========================================"
